"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var forms_1 = require('@angular/forms');
var router_1 = require('@angular/router');
var first_pipe_1 = require('../shared/pipes/first.pipe');
var index_1 = require('../shared/jobproposal/index');
var mydateformat_pipe_1 = require('../shared/pipes/mydateformat.pipe');
var emailvalidate_pipe_1 = require('../shared/pipes/emailvalidate.pipe');
var validator_directive_1 = require('../shared/validators/validator.directive');
var baseurl_service_1 = require('../shared/baseurl/baseurl.service');
var JobproposalComponent = (function () {
    function JobproposalComponent(fb, route, router, localService, mycur, mydate1, emailval, baseUrlservice) {
        this.fb = fb;
        this.route = route;
        this.router = router;
        this.localService = localService;
        this.mycur = mycur;
        this.mydate1 = mydate1;
        this.emailval = emailval;
        this.baseUrlservice = baseUrlservice;
        this.msgs = [];
        this.jobproposals = [];
        this.drpvar = [];
        this.drpjobproposal = [];
        this.uploadedFiles = [];
        this.fileuploadarr = [];
        this.mybaseurl = baseUrlservice.getBaseurl();
    }
    JobproposalComponent.prototype.clear = function () {
        this.newjobproposal = true;
        this.jobproposal = {
            status: 'active',
            comp_id: '',
            member_id: '',
            jobproposal_id: '1',
            jobproposal_name: '',
            jobproposal_budget: '',
            jobproposal_enddate: '',
            jobproposal_remarks: '',
            jobproposal_manhours: '',
            Jobproposal_timeframe: '',
            jobproposal_completed: 'No',
            jobproposal_startdate: '',
            jobproposal_commission: '',
            jobproposal_description: '',
            jobproposal_requireddaystocomplete: '',
        };
        this.fileupload = {
            fileName: '',
            fileType: '',
            filePath: '',
            fileStatus: '',
            uploadfile_filename: ''
        };
    };
    JobproposalComponent.prototype.onRowSelect = function (event) {
        this.newjobproposal = false;
        var tempproj;
        tempproj = this.selectedRow;
    };
    JobproposalComponent.prototype.aftercalldate = function () {
    };
    JobproposalComponent.prototype.onFinalFileUpload = function () {
        for (var i = 0; i < this.uploadedFiles.length; i++) {
            var filename = this.uploadedFiles[i].name;
            this.fileupload.fileName = filename;
            this.fileupload.filePath = '';
            this.fileupload.fileStatus = 'Yes';
            this.fileupload.fileType = 'img';
            this.fileupload.uploadfile_filename = '';
            this.fileuploadarr.push(this.fileupload);
        }
    };
    JobproposalComponent.prototype.onSubmit = function () {
        var _this = this;
        this.onFinalFileUpload();
        this.submitted = true;
        this.msgs = [];
        console.log(JSON.stringify(this.jobproposal));
        this.msgs.push({ severity: 'info', summary: 'Please wait', detail: 'Form Submitted Successfully.. Please wait..' });
        if (this.newjobproposal) {
            this.localService
                .insert(this.jobproposal, this.fileuploadarr)
                .subscribe(function (p) { return _this.jobproposals = p; }, function (e) { return console.log(e); }, function () { return _this.msgs.push({ severity: 'info', summary: 'Success', detail: 'Form Update Successfully' }); });
        }
        else {
            console.log('jobproposal: ' + JSON.stringify(this.jobproposal) + ' , f:' + JSON.stringify(this.fileuploadarr));
            this.localService
                .update(this.jobproposal, this.fileuploadarr)
                .subscribe(function (p) { return _this.jobproposals = p; }, function (e) { return console.log(e); }, function () { return _this.msgs.push({ severity: 'info', summary: 'Success', detail: 'Form Update Successfully' }); });
        }
        this.submitted = true;
        this.msgs = [];
        this.msgs.push({ severity: 'info', summary: 'Success', detail: 'Form Update Successfully' });
    };
    JobproposalComponent.prototype.onUpload = function (event) {
        for (var _i = 0, _a = event.files; _i < _a.length; _i++) {
            var file = _a[_i];
            this.uploadedFiles.push(file);
        }
        this.msgs = [];
        this.msgs.push({ severity: 'info', summary: 'File Uploaded', detail: '' });
    };
    JobproposalComponent.prototype.onBeforeUpload = function (event) {
        event.xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;multipart/form-data;');
        console.log("mith here:");
    };
    JobproposalComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.clear();
        this.userform = this.fb.group({
            'name': new forms_1.FormControl('', forms_1.Validators.compose([forms_1.Validators.required, validator_directive_1.CustomValidator.isEmailValid])),
            'budget': new forms_1.FormControl('', forms_1.Validators.required),
            'remarks': new forms_1.FormControl('', forms_1.Validators.required),
            'manhours': new forms_1.FormControl('', forms_1.Validators.required),
            'startdatev': new forms_1.FormControl('', forms_1.Validators.required),
            'enddatev': new forms_1.FormControl('', forms_1.Validators.required),
            'timeframe': new forms_1.FormControl('', forms_1.Validators.required),
            'completed': new forms_1.FormControl('', forms_1.Validators.required),
            'commission': new forms_1.FormControl('', forms_1.Validators.required),
            'description': new forms_1.FormControl('', forms_1.Validators.required),
            'daysrequired': new forms_1.FormControl('', forms_1.Validators.required),
        });
        this.localService
            .getall()
            .subscribe(function (p) { return _this.jobproposals = p; }, function (e) { return console.log(e); }, function () { return _this.processdata(); });
    };
    JobproposalComponent.prototype.processdata = function () {
    };
    JobproposalComponent.prototype.populatedrp = function () {
        for (var i = 0; i < this.drpvar.length; i++) {
            this.drpjobproposal.push({ label: this.drpvar[i].labeld, value: this.drpvar[i].valued });
        }
    };
    JobproposalComponent.prototype.drpchange = function (events1) {
    };
    Object.defineProperty(JobproposalComponent.prototype, "diagnostic", {
        get: function () { return JSON.stringify(this.userform.value); },
        enumerable: true,
        configurable: true
    });
    JobproposalComponent = __decorate([
        core_1.Component({
            moduleId: module.id,
            selector: 'sd-jobproposal',
            templateUrl: 'jobproposal.component.html',
            styleUrls: ['jobproposal.component.css'],
            providers: [first_pipe_1.MyCurrencyPipe, mydateformat_pipe_1.MyDateFormat, emailvalidate_pipe_1.EmailValidate, baseurl_service_1.BaseUrlService]
        }), 
        __metadata('design:paramtypes', [forms_1.FormBuilder, router_1.ActivatedRoute, router_1.Router, index_1.JobproposalService, first_pipe_1.MyCurrencyPipe, mydateformat_pipe_1.MyDateFormat, emailvalidate_pipe_1.EmailValidate, baseurl_service_1.BaseUrlService])
    ], JobproposalComponent);
    return JobproposalComponent;
}());
exports.JobproposalComponent = JobproposalComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9qb2Jwcm9wb3NhbC9qb2Jwcm9wb3NhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHFCQUFpQyxlQUFlLENBQUMsQ0FBQTtBQUNqRCxzQkFBMkQsZ0JBQWdCLENBQUMsQ0FBQTtBQUk1RSx1QkFBdUMsaUJBQWlCLENBQUMsQ0FBQTtBQVN6RCwyQkFBK0IsNEJBQTRCLENBQUMsQ0FBQTtBQUM1RCxzQkFBbUMsNkJBQTZCLENBQUMsQ0FBQTtBQUlqRSxrQ0FBNkIsbUNBQW1DLENBQUMsQ0FBQTtBQUNqRSxtQ0FBOEIsb0NBQW9DLENBQUMsQ0FBQTtBQUNuRSxvQ0FBZ0MsMENBQTBDLENBQUMsQ0FBQTtBQUMzRSxnQ0FBNkIsbUNBQW1DLENBQUMsQ0FBQTtBQVdqRTtJQW1FRSw4QkFBb0IsRUFBZSxFQUNmLEtBQXFCLEVBQ3JCLE1BQWMsRUFDZCxZQUFnQyxFQUNoQyxLQUFxQixFQUNyQixPQUFxQixFQUNyQixRQUF1QixFQUN2QixjQUE2QjtRQVA3QixPQUFFLEdBQUYsRUFBRSxDQUFhO1FBQ2YsVUFBSyxHQUFMLEtBQUssQ0FBZ0I7UUFDckIsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUNkLGlCQUFZLEdBQVosWUFBWSxDQUFvQjtRQUNoQyxVQUFLLEdBQUwsS0FBSyxDQUFnQjtRQUNyQixZQUFPLEdBQVAsT0FBTyxDQUFjO1FBQ3JCLGFBQVEsR0FBUixRQUFRLENBQWU7UUFDdkIsbUJBQWMsR0FBZCxjQUFjLENBQWU7UUF0RWpELFNBQUksR0FBWSxFQUFFLENBQUM7UUFHbkIsaUJBQVksR0FBZ0IsRUFBRSxDQUFDO1FBTTlCLFdBQU0sR0FBYyxFQUFFLENBQUM7UUFDdkIsbUJBQWMsR0FBZSxFQUFFLENBQUM7UUFXakMsa0JBQWEsR0FBVSxFQUFFLENBQUM7UUFFMUIsa0JBQWEsR0FBZSxFQUFFLENBQUM7UUFpRHRCLElBQUksQ0FBQyxTQUFTLEdBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxDQUFDO0lB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QUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFHLEtBQUssRUFBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBQyxDQUFDLENBQUM7UUFDekYsQ0FBQztJQUdQLENBQUM7SUFHRCx3Q0FBUyxHQUFULFVBQVUsT0FBWTtJQUV0QixDQUFDO0lBR0Qsc0JBQUksNENBQVU7YUFBZCxjQUFtQixNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzs7O09BQUE7SUExUmxFO1FBQUMsZ0JBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxNQUFNLENBQUMsRUFBRTtZQUNuQixRQUFRLEVBQUUsZ0JBQWdCO1lBQzFCLFdBQVcsRUFBRSw0QkFBNEI7WUFDekMsU0FBUyxFQUFFLENBQUMsMkJBQTJCLENBQUM7WUFDeEMsU0FBUyxFQUFDLENBQUMsMkJBQWMsRUFBQyxnQ0FBWSxFQUFDLGtDQUFhLEVBQUMsZ0NBQWMsQ0FBQztTQUNyRSxDQUFDOzs0QkFBQTtJQXNSRCwyQkFBQztBQUFELENBclJELEFBcVJFLElBQUE7QUFyUlcsNEJBQW9CLHVCQXFSL0IsQ0FBQSIsImZpbGUiOiJhcHAvam9icHJvcG9zYWwvam9icHJvcG9zYWwuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0Zvcm1Hcm91cCxGb3JtQ29udHJvbCxWYWxpZGF0b3JzLEZvcm1CdWlsZGVyfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7Rm9ybXNNb2R1bGUsUmVhY3RpdmVGb3Jtc01vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQge01lc3NhZ2VzTW9kdWxlLE1lc3NhZ2UsR3Jvd2x9IGZyb20gJ3ByaW1lbmcvcHJpbWVuZyc7XHJcbmltcG9ydCB7UGFuZWxNb2R1bGV9IGZyb20gJ3ByaW1lbmcvcHJpbWVuZyc7XHJcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlLCBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQge0J1dHRvbk1vZHVsZX0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcclxuaW1wb3J0IHtKb2Jwcm9wb3NhbH0gZnJvbSAnLi9qb2Jwcm9wb3NhbCc7XHJcbmltcG9ydCB7RHJvcGRvd24xfSBmcm9tICcuL2Ryb3Bkb3duMSc7XHJcbmltcG9ydCB7RmlsZVVwbG9hZH0gZnJvbSAnLi9maWxldXBsb2FkJztcclxuaW1wb3J0IHtEYXRhVGFibGVNb2R1bGV9IGZyb20gJ3ByaW1lbmcvcHJpbWVuZyc7XHJcbmltcG9ydCB7RHJvcGRvd25Nb2R1bGV9IGZyb20gJ3ByaW1lbmcvcHJpbWVuZyc7XHJcblxyXG5cclxuaW1wb3J0IHsgTXlDdXJyZW5jeVBpcGUgfSBmcm9tICcuLi9zaGFyZWQvcGlwZXMvZmlyc3QucGlwZSc7XHJcbmltcG9ydCB7IEpvYnByb3Bvc2FsU2VydmljZSB9IGZyb20gJy4uL3NoYXJlZC9qb2Jwcm9wb3NhbC9pbmRleCc7XHJcblxyXG5pbXBvcnQge0ZpbGVVcGxvYWRNb2R1bGV9IGZyb20gJ3ByaW1lbmcvcHJpbWVuZyc7XHJcbmltcG9ydCB7U2VsZWN0SXRlbX0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcclxuaW1wb3J0IHsgTXlEYXRlRm9ybWF0IH0gZnJvbSAnLi4vc2hhcmVkL3BpcGVzL215ZGF0ZWZvcm1hdC5waXBlJztcclxuaW1wb3J0IHsgRW1haWxWYWxpZGF0ZSB9IGZyb20gJy4uL3NoYXJlZC9waXBlcy9lbWFpbHZhbGlkYXRlLnBpcGUnO1xyXG5pbXBvcnQgeyBDdXN0b21WYWxpZGF0b3IgfSBmcm9tICcuLi9zaGFyZWQvdmFsaWRhdG9ycy92YWxpZGF0b3IuZGlyZWN0aXZlJztcclxuaW1wb3J0IHtCYXNlVXJsU2VydmljZX0gZnJvbSAnLi4vc2hhcmVkL2Jhc2V1cmwvYmFzZXVybC5zZXJ2aWNlJztcclxuLyoqXHJcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgbGF6eSBsb2FkZWQgam9icHJvcG9zYWxDb21wb25lbnQuXHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICBtb2R1bGVJZDogbW9kdWxlLmlkLFxyXG4gIHNlbGVjdG9yOiAnc2Qtam9icHJvcG9zYWwnLFxyXG4gIHRlbXBsYXRlVXJsOiAnam9icHJvcG9zYWwuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWydqb2Jwcm9wb3NhbC5jb21wb25lbnQuY3NzJ10sXHJcbiAgcHJvdmlkZXJzOltNeUN1cnJlbmN5UGlwZSxNeURhdGVGb3JtYXQsRW1haWxWYWxpZGF0ZSxCYXNlVXJsU2VydmljZV1cclxufSlcclxuZXhwb3J0IGNsYXNzIEpvYnByb3Bvc2FsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICAvL0Zvcm0gZ3JvcCBcclxuICB1c2VyZm9ybTogRm9ybUdyb3VwO1xyXG4gIC8vIEdyb3dsIG1lc3NlZ2VcclxuICBtc2dzOiBNZXNzYWdlW109W107XHJcblxyXG4gIC8vRGVjbGFyZTogRGF0YSBoYW5kbGluZyBmb3IgR3JpZCBmbG93LCBmb3JtIGZsb3dcclxuICBqb2Jwcm9wb3NhbHM6IEpvYnByb3Bvc2FsW109W107XHJcbiAgc3VibWl0dGVkOiBib29sZWFuO1xyXG4gIGpvYnByb3Bvc2FsOiBKb2Jwcm9wb3NhbDtcclxuICBzZWxlY3RlZFJvdzogSm9icHJvcG9zYWw7XHJcblxyXG4gICAvLyBGb3JtIGRhdGEgcHJlZmlsbGVkXHJcbiAgIGRycHZhcjogRHJvcGRvd24xW109W107XHJcbiAgIGRycGpvYnByb3Bvc2FsOiBTZWxlY3RJdGVtW109W107XHJcbiAgIHN0YXJ0ZGF0ZTogRGF0ZTtcclxuICAgZW5kZGF0ZTogRGF0ZTtcclxuXHJcbiAgIC8vYm9vbGVhbiB2YWx1ZSBmb3IgQWRkIG5ldyBvciBFZGl0IE1vZGVcclxuICAgbmV3am9icHJvcG9zYWw6IGJvb2xlYW47XHJcbiAgIFxyXG4gIC8vICBzZWxlY3RlZGpvYnByb3Bvc2FsOiBzdHJpbmc7XHJcbiAgICAgICBcclxuICAvLyoqKiBmaWxldXBsb2FkIERlY2xhcmUgKioqXHJcbiAgLy9DbGllbnQgZm9ybWF0IGZvciBmaWxlIHVwbG9hZFxyXG4gIHVwbG9hZGVkRmlsZXM6IGFueVtdID0gW107XHJcbiAgLy9zZXJ2ZXIgZm9ybWF0IGZvciBmaWxlIHVwbG9hZFxyXG4gIGZpbGV1cGxvYWRhcnI6IEZpbGVVcGxvYWRbXT1bXTtcclxuICBmaWxldXBsb2FkOiBGaWxlVXBsb2FkO1xyXG5cclxuICBteWJhc2V1cmw6c3RyaW5nO1xyXG5cclxuICAvL1ByZXBhcmUgZGF0YSBmb3IgbmV3IGVudHJ5IG9yIGluaXRpemUgZGF0YSBkdXJpbmcgZm9ybSBsb2FkIGJ5IGNsZWFyaW5nIGRhdGEgb3IgcHJlc2V0dGluZyBkYXRhXHJcbiAgY2xlYXIoKXtcclxuICAgICAgICB0aGlzLm5ld2pvYnByb3Bvc2FsPXRydWU7XHJcbiAgICAgICAgdGhpcy5qb2Jwcm9wb3NhbD17XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgc3RhdHVzIDonYWN0aXZlJyxcclxuICAgICAgICAgIGNvbXBfaWQgOicnLFxyXG4gICAgICAgICAgbWVtYmVyX2lkIDonJyxcclxuICAgICAgICAgIGpvYnByb3Bvc2FsX2lkOicxJyxcclxuICAgICAgICAgIGpvYnByb3Bvc2FsX25hbWU6JycsXHJcbiAgICAgICAgICBqb2Jwcm9wb3NhbF9idWRnZXQ6JycsXHJcbiAgICAgICAgICBqb2Jwcm9wb3NhbF9lbmRkYXRlOicnLFxyXG4gICAgICAgICAgam9icHJvcG9zYWxfcmVtYXJrczonJyxcclxuICAgICAgICAgIGpvYnByb3Bvc2FsX21hbmhvdXJzOicnLFxyXG4gICAgICAgICAgSm9icHJvcG9zYWxfdGltZWZyYW1lOicnLFxyXG4gICAgICAgICAgam9icHJvcG9zYWxfY29tcGxldGVkOidObycsXHJcbiAgICAgICAgICBqb2Jwcm9wb3NhbF9zdGFydGRhdGU6JycsXHJcbiAgICAgICAgICBqb2Jwcm9wb3NhbF9jb21taXNzaW9uOicnLFxyXG4gICAgICAgICAgam9icHJvcG9zYWxfZGVzY3JpcHRpb246JycsXHJcbiAgICAgICAgICBqb2Jwcm9wb3NhbF9yZXF1aXJlZGRheXN0b2NvbXBsZXRlOicnLFxyXG4gICAgICB9XHJcblxyXG4gICAgICBcclxuICAgICAgXHJcbiAgICAgIFxyXG4gICAgdGhpcy5maWxldXBsb2FkPXtcclxuICAgICAgZmlsZU5hbWU6ICcnLFxyXG4gICAgICBmaWxlVHlwZTogJycsXHJcbiAgICAgIGZpbGVQYXRoOiAnJyxcclxuICAgICAgZmlsZVN0YXR1czogJycsXHJcbiAgICAgIHVwbG9hZGZpbGVfZmlsZW5hbWU6ICcnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBjb25zdHJ1Y3RvciBpbml0aWF6ZSBvZiBhbGwgbmVjZXNzYXJ5IHZhcmlhYmxlIGFuZCBvYmplY3RzXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBmYjogRm9ybUJ1aWxkZXIsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSByb3V0ZTogQWN0aXZhdGVkUm91dGUsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcclxuICAgICAgICAgICAgICBwcml2YXRlIGxvY2FsU2VydmljZTogSm9icHJvcG9zYWxTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgbXljdXI6IE15Q3VycmVuY3lQaXBlLFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgbXlkYXRlMTogTXlEYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgZW1haWx2YWw6IEVtYWlsVmFsaWRhdGUsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSBiYXNlVXJsc2VydmljZTpCYXNlVXJsU2VydmljZVxyXG4gICAgICAgICAgICAgICl7XHJcbiAgICAgICAgICAgdGhpcy5teWJhc2V1cmw9YmFzZVVybHNlcnZpY2UuZ2V0QmFzZXVybCgpOyAgICAgXHJcbiAgICAgICAgICAvLyBkcnBvcCBkb3duIGNhbiBvbmx5IGJlIHBvcHVsYXRlZCBpbiBjb25zdHJ1Y3RvciBhbmQgbm90IGluIG5naW5pdCgpXHJcbiAgICAgICAgICAvLyB0aGlzLmxvY2FsU2VydmljZVxyXG4gICAgICAgICAgLy8gLmdldHNlbGVjdGRycGpvYnByb3Bvc2FsKCdoaicpXHJcbiAgICAgICAgICAvLyAuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgLy8gICAvKiBoYXBweSBwYXRoICovIHAgPT50aGlzLmRycHZhcj1wLC8vYWxlcnQoIEpTT04uc3RyaW5naWZ5KCBwKSksXHJcbiAgICAgICAgICAvLyAgIC8qIGVycm9yIHBhdGggKi8gZSA9PiBjb25zb2xlLmxvZyhlKSxcclxuICAgICAgICAgIC8vICAgLyogb25Db21wbGV0ZSAqLyAoKSA9PiB0aGlzLnBvcHVsYXRlZHJwKCkpOy8ve3RoaXMubXltZXRob2QodGhpcy5kcnB2YXIpO30pOy8vdGhpcy5tc2dzLnB1c2goe3NldmVyaXR5OidpbmZvJywgc3VtbWFyeTonU3VjY2VzcycsIGRldGFpbDonRm9ybSBVcGRhdGUgU3VjY2Vzc2Z1bGx5OiAnICsgSlNPTi5zdHJpbmdpZnkoIHRoaXMuZHJwdmFyKSArICcgOiAnICsgdGhpcy5kcnB2YXIubGVuZ3RofSkpO1xyXG5cclxuICAgIFxyXG4gIH1cclxuICBvblJvd1NlbGVjdChldmVudDogYW55KXtcclxuICAgICAgICAgLy9JbmRpY2F0b3IgZm9yIGZvcm0gaXMgaW4gRWRpdCBtb2RlXHJcbiAgICAgICAgIHRoaXMubmV3am9icHJvcG9zYWw9ZmFsc2U7XHJcbiAgICAgICAgIC8vQ29weSBvZiByb3cgc2VsZWN0ZWRcclxuICAgICAgICAvLyAgdGhpcy5qb2Jwcm9wb3NhbD10aGlzLnNlbGVjdGVkUm93O1xyXG4gICAgICAgICBsZXQgdGVtcHByb2o6IEpvYnByb3Bvc2FsO1xyXG4gICAgICAgICB0ZW1wcHJvaiA9IHRoaXMuc2VsZWN0ZWRSb3c7XHJcbiAgICAgICAgIC8vQ2FsbGluZyBXUyB0byBnZXQgdGhlIHNlbGVjdGVkIGRhdGEgZnJvbSBzZXJ2ZXIgREIgb2YgdGhlIHNlbGVjdGVkIHJvd1xyXG4gICAgICAgICAvKlxyXG4gICAgICAgICB0aGlzLmxvY2FsU2VydmljZVxyXG4gICAgICAuZ2V0c2VsZWN0QWxsZmlsZUpvYnByb3Bvc2FsKHRlbXBwcm9qLmpvYnByb3Bvc2FsX2lkKVxyXG4gICAgICAuc3Vic2NyaWJlKFxyXG4gICAgICAgICAvKiBoYXBweSBwYXRoICovIC8vcCA9PiB0aGlzLmZpbGV1cGxvYWRhcnI9cCxcclxuICAgICAgICAgLyogZXJyb3IgcGF0aCAqLyAvL2UgPT4gY29uc29sZS5sb2coIGUpLFxyXG4gICAgICAgICAvKiBvbkNvbXBsZXRlICovIC8vKCkgPT4gY29uc29sZS5sb2coJ2RvbmUgZ2V0c2VsZWN0QWxsZmlsZXVwbG9hZGpvYnByb3Bvc2FsOiAnICsgdGhpcy5maWxldXBsb2FkYXJyKSk7XHJcblxyXG4gICAgICAgIC8vICBjb25zb2xlLmxvZygnb25Sb3dTZWxlY3Q6ICcgKyBKU09OLnN0cmluZ2lmeSAodGhpcy5qb2Jwcm9wb3NhbCkpO1xyXG4gICAgICAgIC8vICBjb25zb2xlLmxvZygnb25Sb3dTZWxlY3QgZmlsZXVwbG9hZGFycjogJyArIEpTT04uc3RyaW5naWZ5ICh0aGlzLmZpbGV1cGxvYWRhcnIpKTtcclxuXHJcbiAgICAgICAgIC8vQ2FsbGluZyBXUyB0byBnZXQgdGhlIHNlbGVjdGVkIGRhdGEgZnJvbSBzZXJ2ZXIgREIgb2YgdGhlIHNlbGVjdGVkIHJvd1xyXG4gICAgICAgXHJcbiAgICAgICAvKiB0aGlzLmxvY2FsU2VydmljZVxyXG4gICAgICAuZ2V0ZWRpdCh0ZW1wcHJvai5qb2Jwcm9wb3NhbF9pZClcclxuICAgICAgLnN1YnNjcmliZShcclxuICAgICAgICAgLyogaGFwcHkgcGF0aCAqLyAvL3AgPT4gdGhpcy5qb2Jwcm9wb3NhbD1wLFxyXG4gICAgICAgICAvKiBlcnJvciBwYXRoICovIC8vZSA9PiBjb25zb2xlLmxvZyggZSksXHJcbiAgICAgICAgIC8qIG9uQ29tcGxldGUgKi8gLy8oKSA9PiB7dGhpcy5hZnRlcmNhbGxkYXRlKCk7fSApOy8vY29uc29sZS5sb2coJ2RvbmUgZ2V0c2VsZWN0RWRpdGpvYnByb3Bvc2FsOiAnICsgdGhpcy5qb2Jwcm9wb3NhbCkpO1xyXG5cclxuICAgICAgICAgXHJcbiAgICAgICAgIFxyXG4gIH1cclxuICBhZnRlcmNhbGxkYXRlKCl7XHJcbiAgICAvKlxyXG4gICAgIGFsZXJ0KEpTT04uc3RyaW5naWZ5KCB0aGlzLmpvYnByb3Bvc2FsKSk7XHJcbiAgICBhbGVydCh0aGlzLmpvYnByb3Bvc2FsLmpvYnByb3Bvc2FsX2VuZGRhdGUpO1xyXG4gICAgICAgICBhbGVydChuZXcgRGF0ZShOdW1iZXIodGhpcy5qb2Jwcm9wb3NhbC5qb2Jwcm9wb3NhbF9lbmRkYXRlKSApKTtcclxuICAgICAgICAgYWxlcnQobmV3IERhdGUoTnVtYmVyKHRoaXMuam9icHJvcG9zYWwuam9icHJvcG9zYWxfc3RhcnRkYXRlKSApKTtcclxuICAgIHRoaXMuc3RhcnRkYXRlICA9IG5ldyBEYXRlKE51bWJlcih0aGlzLmpvYnByb3Bvc2FsLmpvYnByb3Bvc2FsX3N0YXJ0ZGF0ZSApKTtcclxuICAgIHRoaXMuZW5kZGF0ZSAgPSBuZXcgRGF0ZShOdW1iZXIodGhpcy5qb2Jwcm9wb3NhbC5qb2Jwcm9wb3NhbF9lbmRkYXRlICkpO1xyXG4gIFxyXG4qL1xyXG59XHJcblxyXG4gIC8vUHJlcGFyZSBmb3IgSlNPTiBmb3IgZmlsZSB0byBiZSB1cGxvYWRlZCB0byBzZXJ2ZXIganVzdCBhZnRlciBmb3JtIHN1Ym1pc3Npb25cclxuICBvbkZpbmFsRmlsZVVwbG9hZCgpeyAgIFxyXG4gIFxyXG4gICAgLy8gYWxlcnQodGhpcy51cGxvYWRlZEZpbGVzLmxlbmd0aCk7XHJcbiAgICBmb3IobGV0IGk9MDtpPHRoaXMudXBsb2FkZWRGaWxlcy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgIGxldCBmaWxlbmFtZT10aGlzLnVwbG9hZGVkRmlsZXNbaV0ubmFtZTtcclxuICAgICAgICAgXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHRoaXMuZmlsZXVwbG9hZC5maWxlTmFtZT1maWxlbmFtZTtcclxuICAgICAgICAgIHRoaXMuZmlsZXVwbG9hZC5maWxlUGF0aD0nJztcclxuICAgICAgICAgIHRoaXMuZmlsZXVwbG9hZC5maWxlU3RhdHVzPSdZZXMnO1xyXG4gICAgICAgICAgdGhpcy5maWxldXBsb2FkLmZpbGVUeXBlPSdpbWcnO1xyXG4gICAgICAgICAgdGhpcy5maWxldXBsb2FkLnVwbG9hZGZpbGVfZmlsZW5hbWU9Jyc7XHJcbiAgICAgICAgIC8vIGFsZXJ0KFwiaW5zaWRlZmlsZXVwbG9hZDogXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmZpbGV1cGxvYWQpKTtcclxuICAgICAgICAgIHRoaXMuZmlsZXVwbG9hZGFyci5wdXNoKHRoaXMuZmlsZXVwbG9hZCk7XHJcbiAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgXHJcbiAgfSBcclxuXHJcbiAgLy8gRGF0ZSBjaGFuZ2UgZXZlbnQgdG8gZm9ybWF0IG5nbW9kZWwgdG8gb3VyIGZvcm1hdCBkYXRlIGFuZCBjYWxsaW5nIHBpcGUgXHJcbiAgLy8gc3RhcnRkYXRlY2hhbmdlKCl7XHJcbiAgLy8gICB0aGlzLmpvYnByb3Bvc2FsLnByb2ptaWxlX3N0YXJ0ZGF0ZT10aGlzLm15ZGF0ZTEucGFyc2UodGhpcy5qb2Jwcm9wb3NhbC5wcm9qbWlsZV9zdGFydGRhdGUpXHJcbiAgLy8gfVxyXG4gIC8vIGVuZGRhdGVjaGFuZ2UoKXtcclxuICAvLyAgIHRoaXMuam9icHJvcG9zYWwucHJvam1pbGVfZW5kZGF0ZT10aGlzLm15ZGF0ZTEucGFyc2UodGhpcy5qb2Jwcm9wb3NhbC5wcm9qbWlsZV9lbmRkYXRlKVxyXG4gIC8vIH1cclxuXHJcblxyXG4gIG9uU3VibWl0KCl7XHJcbiAgICAgIC8vICAgYWxlcnQoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZFJvdykpO1xyXG4gICAgICAgIC8vYWxlcnQodGhpcy5qb2Jwcm9wb3NhbC5qb2Jwcm9wb3NhbF9zdGFydGRhdGUpO1xyXG4gICAgICAgIC8vdGhpcy5qb2Jwcm9wb3NhbC5qb2Jwcm9wb3NhbF9zdGFydGRhdGU9dGhpcy5teWRhdGUxLnBhcnNlKHRoaXMuc3RhcnRkYXRlKVxyXG4gIFxyXG4gICAgICAgIC8vdGhpcy5qb2Jwcm9wb3NhbC5qb2Jwcm9wb3NhbF9lbmRkYXRlPXRoaXMubXlkYXRlMS5wYXJzZSh0aGlzLmVuZGRhdGUpXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5vbkZpbmFsRmlsZVVwbG9hZCgpO1xyXG4gICAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1zZ3MgPSBbXTtcclxuICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLmpvYnByb3Bvc2FsKSk7XHJcbiAgICAgICAgdGhpcy5tc2dzLnB1c2goe3NldmVyaXR5OidpbmZvJywgc3VtbWFyeTonUGxlYXNlIHdhaXQnLCBkZXRhaWw6J0Zvcm0gU3VibWl0dGVkIFN1Y2Nlc3NmdWxseS4uIFBsZWFzZSB3YWl0Li4nfSlcclxuICAgICAgICBcclxuICAgICAgICAvLyAgY29uc29sZS5sb2coJ29uU3VibWl0IG9uUm93U2VsZWN0OiAnICsgSlNPTi5zdHJpbmdpZnkgKHRoaXMuam9icHJvcG9zYWwpKTtcclxuICAgICAgICAvLyAgY29uc29sZS5sb2coJ29uU3VibWl0IG9uUm93U2VsZWN0IGZpbGV1cGxvYWRhcnI6ICcgKyBKU09OLnN0cmluZ2lmeSAodGhpcy5maWxldXBsb2FkYXJyKSk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMubmV3am9icHJvcG9zYWwpey8vQWRkIG5ldyBlbnRyeSBzYXZpbmdcclxuICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZVxyXG4gICAgICAgICAgLmluc2VydCh0aGlzLmpvYnByb3Bvc2FsLHRoaXMuZmlsZXVwbG9hZGFycilcclxuICAgICAgICAgIC5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgIC8qIGhhcHB5IHBhdGggKi8gcCA9PiB0aGlzLmpvYnByb3Bvc2FscyA9IHAsXHJcbiAgICAgICAgICAgIC8qIGVycm9yIHBhdGggKi8gZSA9PiBjb25zb2xlLmxvZyhlKSxcclxuICAgICAgICAgICAgLyogb25Db21wbGV0ZSAqLyAoKSA9PiB0aGlzLm1zZ3MucHVzaCh7c2V2ZXJpdHk6J2luZm8nLCBzdW1tYXJ5OidTdWNjZXNzJywgZGV0YWlsOidGb3JtIFVwZGF0ZSBTdWNjZXNzZnVsbHknfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNleyAvLyB1cGRhdGUgZW50cnkgc2F2aW5nXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnam9icHJvcG9zYWw6ICcgKyBKU09OLnN0cmluZ2lmeSggdGhpcy5qb2Jwcm9wb3NhbCkgKyAnICwgZjonICsgIEpTT04uc3RyaW5naWZ5KCB0aGlzLmZpbGV1cGxvYWRhcnIpKTtcclxuICAgICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlXHJcbiAgICAgICAgICAudXBkYXRlKHRoaXMuam9icHJvcG9zYWwsdGhpcy5maWxldXBsb2FkYXJyKVxyXG4gICAgICAgICAgLnN1YnNjcmliZShcclxuICAgICAgICAgICAgLyogaGFwcHkgcGF0aCAqLyBwID0+IHRoaXMuam9icHJvcG9zYWxzID0gcCxcclxuICAgICAgICAgICAgLyogZXJyb3IgcGF0aCAqLyBlID0+IGNvbnNvbGUubG9nKGUpLFxyXG4gICAgICAgICAgICAvKiBvbkNvbXBsZXRlICovICgpID0+IHRoaXMubXNncy5wdXNoKHtzZXZlcml0eTonaW5mbycsIHN1bW1hcnk6J1N1Y2Nlc3MnLCBkZXRhaWw6J0Zvcm0gVXBkYXRlIFN1Y2Nlc3NmdWxseSd9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy5tc2dzID0gW107XHJcbiAgICAgICAgICB0aGlzLm1zZ3MucHVzaCh7c2V2ZXJpdHk6J2luZm8nLCBzdW1tYXJ5OidTdWNjZXNzJywgZGV0YWlsOidGb3JtIFVwZGF0ZSBTdWNjZXNzZnVsbHknfSk7XHJcbiAgfVxyXG5cclxuICAvL3VwbG9hZCBmaWxlcyB0byB0aGUgc2VydmVyXHJcbm9uVXBsb2FkKGV2ZW50OiBhbnkpe1xyXG4gIC8vYWxlcnQoZXZlbnQuZmlsZXMpO1xyXG4gIGZvcihsZXQgZmlsZSBvZiBldmVudC5maWxlcykge1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0aGlzLnVwbG9hZGVkRmlsZXMucHVzaChmaWxlKTtcclxuICB9XHJcbiAgXHJcbiAgLy9jb25zb2xlLmxvZyhldmVudC54aHIucmVzcG9uc2UpO1xyXG4gIHRoaXMubXNncyA9IFtdO1xyXG4gIHRoaXMubXNncy5wdXNoKHtzZXZlcml0eTogJ2luZm8nLCBzdW1tYXJ5OiAnRmlsZSBVcGxvYWRlZCcsIGRldGFpbDogJyd9KTtcclxufVxyXG5cclxuICAvL0ZpbGUgdXBsb2FkIGV2ZW50XHJcbm9uQmVmb3JlVXBsb2FkKGV2ZW50IDphbnkgKXtcclxuICBldmVudC54aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDttdWx0aXBhcnQvZm9ybS1kYXRhOycpO1xyXG4gIGNvbnNvbGUubG9nKFwibWl0aCBoZXJlOlwiKTtcclxufVxyXG5cclxuLy9Gb3JtIGluaXRcclxubmdPbkluaXQoKSB7IFxyXG4gICAgICAvL0NsZWFyIGV2ZW50IGFuZCBpbml0YWxpemUgb2JqZWN0c1xyXG4gICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBhbGVydCggdGhpcy5zdGFydGRhdGUuZ2V0RGF5ICsgJy8nICt0aGlzLnN0YXJ0ZGF0ZS5nZXRNb250aCArICcvJyArdGhpcy5zdGFydGRhdGUuZ2V0RnVsbFllYXIpOyBcclxuICAgICAgLy8gYWxlcnQoICdudW1iZXI6ICcgKyB0aGlzLm15Y3VyLnBhcnNlKFwiMTBcIikpO1xyXG4gICAgICAvLyBsZXQgYmw6IGJvb2xlYW47XHJcbiAgICAgIC8vIGJsID0gIHRoaXMuZW1haWx2YWwucGFyc2UoJ2F0dWxrdWx2ZWdtYWlsLmNvbScsJycpO1xyXG4gICAgICAvLyBhbGVydChibCApO1xyXG5cclxuICAgICAgLy9DcmVhdGUgdXNlcmZvcm0gYW5kIGFwcGx5IFZhbGlkYXRpb25cclxuICAgICAgLy8gYWxlcnQodGhpcy5teWRhdGUxLnBhcnNlKCAnMjAxNi0xMi0xM1QxODozMDowMC4wMDBaJykpO1xyXG4gICAgICB0aGlzLnVzZXJmb3JtID0gdGhpcy5mYi5ncm91cCh7XHJcbiAgICAgICAgICAgICduYW1lJzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLmNvbXBvc2UoW1ZhbGlkYXRvcnMucmVxdWlyZWQsQ3VzdG9tVmFsaWRhdG9yLmlzRW1haWxWYWxpZF0pKSxcclxuICAgICAgICAgICAgICdidWRnZXQnOiBuZXcgRm9ybUNvbnRyb2woJycsIFZhbGlkYXRvcnMucmVxdWlyZWQpLFxyXG4gICAgICAgICAgICAgJ3JlbWFya3MnOiBuZXcgRm9ybUNvbnRyb2woJycsIFZhbGlkYXRvcnMucmVxdWlyZWQpLFxyXG4gICAgICAgICAgICAgJ21hbmhvdXJzJzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgICdzdGFydGRhdGV2JzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgICdlbmRkYXRldic6IG5ldyBGb3JtQ29udHJvbCgnJywgVmFsaWRhdG9ycy5yZXF1aXJlZCksXHJcbiAgICAgICAgICAgICAndGltZWZyYW1lJzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgICdjb21wbGV0ZWQnOiBuZXcgRm9ybUNvbnRyb2woJycsIFZhbGlkYXRvcnMucmVxdWlyZWQpLFxyXG4gICAgICAgICAgICAgJ2NvbW1pc3Npb24nOiBuZXcgRm9ybUNvbnRyb2woJycsIFZhbGlkYXRvcnMucmVxdWlyZWQpLFxyXG4gICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgICdkYXlzcmVxdWlyZWQnOiBuZXcgRm9ybUNvbnRyb2woJycsIFZhbGlkYXRvcnMucmVxdWlyZWQpLFxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvL3ByZWxvYWQgZGF0YSBHcmlkIHJlcXVpcmVkIFxyXG4gICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlXHJcbiAgICAgIC5nZXRhbGwoKVxyXG4gICAgICAuc3Vic2NyaWJlKFxyXG4gICAgICAgICAvKiBoYXBweSBwYXRoICovIHAgPT4gdGhpcy5qb2Jwcm9wb3NhbHM9cCxcclxuICAgICAgICAgLyogZXJyb3IgcGF0aCAqLyBlID0+IGNvbnNvbGUubG9nKCBlKSxcclxuICAgICAgICAgLyogb25Db21wbGV0ZSAqLyAoKSA9PiB0aGlzLnByb2Nlc3NkYXRhKCkpO1xyXG5cclxuICAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgfVxyXG4gIHByb2Nlc3NkYXRhKCl7XHJcbiAgICBcclxuXHJcbiAgfVxyXG4gIHBvcHVsYXRlZHJwKCl7IC8vcG9wdWxhdGUgZHJvcGRvd25zIG9uIHBhZ2UgbG9hZC4gYnkgdXNpbmcgcHVzaCBhbmQgU2VsZWN0SXRlbVxyXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLmRycHZhci5sZW5ndGgpO1xyXG4gICAgICAgIGZvcih2YXIgaSA9MDtpPHRoaXMuZHJwdmFyLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgLy9hbGVydCh0aGlzLmRycHZhcltpXS5sYWJlbGQgKyAnIDogJyAgKyB0aGlzLmRycHZhcltpXS52YWx1ZWQpO1xyXG4gICAgICAgICAgIHRoaXMuZHJwam9icHJvcG9zYWwucHVzaCh7bGFiZWw6dGhpcy5kcnB2YXJbaV0ubGFiZWxkICwgdmFsdWU6dGhpcy5kcnB2YXJbaV0udmFsdWVkfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFsZXJ0KEpTT04uc3RyaW5naWZ5KHRoaXMuZHJwam9icHJvcG9zYWwpKTtcclxuXHJcbiAgfVxyXG5cclxuICAvL0Ryb3Bkb3duIGNoYW5nZSBldmVudCBjYXB0dXJlXHJcbiAgZHJwY2hhbmdlKGV2ZW50czE6IGFueSl7XHJcbiAgICAvLyBhbGVydChldmVudHMxLnZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8vSnVzdCBhIG1ldGhvZCB0byBjYWxsIHVzZXIgZm9ybSBkYXRhIG9uIGZvcm0gc3VibWl0XHJcbiAgZ2V0IGRpYWdub3N0aWMoKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJmb3JtLnZhbHVlKTsgfVxyXG5cclxuIH1cclxuIl19
