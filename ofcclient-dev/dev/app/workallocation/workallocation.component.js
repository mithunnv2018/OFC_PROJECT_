"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var forms_1 = require('@angular/forms');
var router_1 = require('@angular/router');
var first_pipe_1 = require('../shared/pipes/first.pipe');
var index_1 = require('../shared/workallocation/index');
var mydateformat_pipe_1 = require('../shared/pipes/mydateformat.pipe');
var emailvalidate_pipe_1 = require('../shared/pipes/emailvalidate.pipe');
var validator_directive_1 = require('../shared/validators/validator.directive');
var baseurl_service_1 = require('../shared/baseurl/baseurl.service');
var WorkallocationComponent = (function () {
    function WorkallocationComponent(fb, route, router, localService, mycur, mydate1, emailval, baseUrlservice) {
        this.fb = fb;
        this.route = route;
        this.router = router;
        this.localService = localService;
        this.mycur = mycur;
        this.mydate1 = mydate1;
        this.emailval = emailval;
        this.baseUrlservice = baseUrlservice;
        this.msgs = [];
        this.workallocations = [];
        this.drpvar = [];
        this.drpworkallocation = [];
        this.uploadedFiles = [];
        this.fileuploadarr = [];
        this.mybaseurl = baseUrlservice.getBaseurl();
    }
    WorkallocationComponent.prototype.clear = function () {
        this.newworkallocation = true;
        this.workallocation = {
            status: 'active',
            comp_id: '',
            member_id: '',
            workallocation_id: '1',
            workallocation_name: '',
            workallocation_budget: '',
            workallocation_enddate: '',
            workallocation_remarks: '',
            workallocation_manhours: '',
            Workallocation_timeframe: '',
            workallocation_completed: 'No',
            workallocation_startdate: '',
            workallocation_commission: '',
            workallocation_description: '',
            workallocation_requireddaystocomplete: '',
        };
        this.fileupload = {
            fileName: '',
            fileType: '',
            filePath: '',
            fileStatus: '',
            uploadfile_filename: ''
        };
    };
    WorkallocationComponent.prototype.onRowSelect = function (event) {
        this.newworkallocation = false;
        var tempproj;
        tempproj = this.selectedRow;
    };
    WorkallocationComponent.prototype.aftercalldate = function () {
    };
    WorkallocationComponent.prototype.onFinalFileUpload = function () {
        for (var i = 0; i < this.uploadedFiles.length; i++) {
            var filename = this.uploadedFiles[i].name;
            this.fileupload.fileName = filename;
            this.fileupload.filePath = '';
            this.fileupload.fileStatus = 'Yes';
            this.fileupload.fileType = 'img';
            this.fileupload.uploadfile_filename = '';
            this.fileuploadarr.push(this.fileupload);
        }
    };
    WorkallocationComponent.prototype.onSubmit = function () {
        var _this = this;
        this.onFinalFileUpload();
        this.submitted = true;
        this.msgs = [];
        console.log(JSON.stringify(this.workallocation));
        this.msgs.push({ severity: 'info', summary: 'Please wait', detail: 'Form Submitted Successfully.. Please wait..' });
        if (this.newworkallocation) {
            this.localService
                .insert(this.workallocation, this.fileuploadarr)
                .subscribe(function (p) { return _this.workallocations = p; }, function (e) { return console.log(e); }, function () { return _this.msgs.push({ severity: 'info', summary: 'Success', detail: 'Form Update Successfully' }); });
        }
        else {
            console.log('workallocation: ' + JSON.stringify(this.workallocation) + ' , f:' + JSON.stringify(this.fileuploadarr));
            this.localService
                .update(this.workallocation, this.fileuploadarr)
                .subscribe(function (p) { return _this.workallocations = p; }, function (e) { return console.log(e); }, function () { return _this.msgs.push({ severity: 'info', summary: 'Success', detail: 'Form Update Successfully' }); });
        }
        this.submitted = true;
        this.msgs = [];
        this.msgs.push({ severity: 'info', summary: 'Success', detail: 'Form Update Successfully' });
    };
    WorkallocationComponent.prototype.onUpload = function (event) {
        for (var _i = 0, _a = event.files; _i < _a.length; _i++) {
            var file = _a[_i];
            this.uploadedFiles.push(file);
        }
        this.msgs = [];
        this.msgs.push({ severity: 'info', summary: 'File Uploaded', detail: '' });
    };
    WorkallocationComponent.prototype.onBeforeUpload = function (event) {
        event.xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;multipart/form-data;');
        console.log("mith here:");
    };
    WorkallocationComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.clear();
        this.userform = this.fb.group({
            'name': new forms_1.FormControl('', forms_1.Validators.compose([forms_1.Validators.required, validator_directive_1.CustomValidator.isEmailValid])),
            'budget': new forms_1.FormControl('', forms_1.Validators.required),
            'remarks': new forms_1.FormControl('', forms_1.Validators.required),
            'manhours': new forms_1.FormControl('', forms_1.Validators.required),
            'startdatev': new forms_1.FormControl('', forms_1.Validators.required),
            'enddatev': new forms_1.FormControl('', forms_1.Validators.required),
            'timeframe': new forms_1.FormControl('', forms_1.Validators.required),
            'completed': new forms_1.FormControl('', forms_1.Validators.required),
            'commission': new forms_1.FormControl('', forms_1.Validators.required),
            'description': new forms_1.FormControl('', forms_1.Validators.required),
            'daysrequired': new forms_1.FormControl('', forms_1.Validators.required),
        });
        this.localService
            .getall()
            .subscribe(function (p) { return _this.workallocations = p; }, function (e) { return console.log(e); }, function () { return _this.processdata(); });
    };
    WorkallocationComponent.prototype.processdata = function () {
    };
    WorkallocationComponent.prototype.populatedrp = function () {
        for (var i = 0; i < this.drpvar.length; i++) {
            this.drpworkallocation.push({ label: this.drpvar[i].labeld, value: this.drpvar[i].valued });
        }
    };
    WorkallocationComponent.prototype.drpchange = function (events1) {
    };
    Object.defineProperty(WorkallocationComponent.prototype, "diagnostic", {
        get: function () { return JSON.stringify(this.userform.value); },
        enumerable: true,
        configurable: true
    });
    WorkallocationComponent = __decorate([
        core_1.Component({
            moduleId: module.id,
            selector: 'sd-workallocation',
            templateUrl: 'workallocation.component.html',
            styleUrls: ['workallocation.component.css'],
            providers: [first_pipe_1.MyCurrencyPipe, mydateformat_pipe_1.MyDateFormat, emailvalidate_pipe_1.EmailValidate, baseurl_service_1.BaseUrlService]
        }), 
        __metadata('design:paramtypes', [forms_1.FormBuilder, router_1.ActivatedRoute, router_1.Router, index_1.WorkallocationService, first_pipe_1.MyCurrencyPipe, mydateformat_pipe_1.MyDateFormat, emailvalidate_pipe_1.EmailValidate, baseurl_service_1.BaseUrlService])
    ], WorkallocationComponent);
    return WorkallocationComponent;
}());
exports.WorkallocationComponent = WorkallocationComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC93b3JrYWxsb2NhdGlvbi93b3JrYWxsb2NhdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHFCQUFpQyxlQUFlLENBQUMsQ0FBQTtBQUNqRCxzQkFBMkQsZ0JBQWdCLENBQUMsQ0FBQTtBQUk1RSx1QkFBdUMsaUJBQWlCLENBQUMsQ0FBQTtBQVN6RCwyQkFBK0IsNEJBQTRCLENBQUMsQ0FBQTtBQUM1RCxzQkFBc0MsZ0NBQWdDLENBQUMsQ0FBQTtBQUl2RSxrQ0FBNkIsbUNBQW1DLENBQUMsQ0FBQTtBQUNqRSxtQ0FBOEIsb0NBQW9DLENBQUMsQ0FBQTtBQUNuRSxvQ0FBZ0MsMENBQTBDLENBQUMsQ0FBQTtBQUMzRSxnQ0FBNkIsbUNBQW1DLENBQUMsQ0FBQTtBQVdqRTtJQW1FRSxpQ0FBb0IsRUFBZSxFQUNmLEtBQXFCLEVBQ3JCLE1BQWMsRUFDZCxZQUFtQyxFQUNuQyxLQUFxQixFQUNyQixPQUFxQixFQUNyQixRQUF1QixFQUN2QixjQUE2QjtRQVA3QixPQUFFLEdBQUYsRUFBRSxDQUFhO1FBQ2YsVUFBSyxHQUFMLEtBQUssQ0FBZ0I7UUFDckIsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUNkLGlCQUFZLEdBQVosWUFBWSxDQUF1QjtRQUNuQyxVQUFLLEdBQUwsS0FBSyxDQUFnQjtRQUNyQixZQUFPLEdBQVAsT0FBTyxDQUFjO1FBQ3JCLGFBQVEsR0FBUixRQUFRLENBQWU7UUFDdkIsbUJBQWMsR0FBZCxjQUFjLENBQWU7UUF0RWpELFNBQUksR0FBWSxFQUFFLENBQUM7UUFHbkIsb0JBQWUsR0FBbUIsRUFBRSxDQUFDO1FBTXBDLFdBQU0sR0FBYyxFQUFFLENBQUM7UUFDdkIsc0JBQWlCLEdBQWUsRUFBRSxDQUFDO1FBV3BDLGtCQUFhLEdBQVUsRUFBRSxDQUFDO1FBRTFCLGtCQUFhLEdBQWUsRUFBRSxDQUFDO1FBaUR0QixJQUFJLENBQUMsU0FBUyxHQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUs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QUFJLENBQUMsRUFBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUcsS0FBSyxFQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQztRQUM1RixDQUFDO0lBR1AsQ0FBQztJQUdELDJDQUFTLEdBQVQsVUFBVSxPQUFZO0lBRXRCLENBQUM7SUFHRCxzQkFBSSwrQ0FBVTthQUFkLGNBQW1CLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQXJSbEU7UUFBQyxnQkFBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1lBQ25CLFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsV0FBVyxFQUFFLCtCQUErQjtZQUM1QyxTQUFTLEVBQUUsQ0FBQyw4QkFBOEIsQ0FBQztZQUMzQyxTQUFTLEVBQUMsQ0FBQywyQkFBYyxFQUFDLGdDQUFZLEVBQUMsa0NBQWEsRUFBQyxnQ0FBYyxDQUFDO1NBQ3JFLENBQUM7OytCQUFBO0lBaVJELDhCQUFDO0FBQUQsQ0FoUkQsQUFnUkUsSUFBQTtBQWhSVywrQkFBdUIsMEJBZ1JsQyxDQUFBIiwiZmlsZSI6ImFwcC93b3JrYWxsb2NhdGlvbi93b3JrYWxsb2NhdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7Rm9ybUdyb3VwLEZvcm1Db250cm9sLFZhbGlkYXRvcnMsRm9ybUJ1aWxkZXJ9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHtGb3Jtc01vZHVsZSxSZWFjdGl2ZUZvcm1zTW9kdWxlfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7TWVzc2FnZXNNb2R1bGUsTWVzc2FnZSxHcm93bH0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcclxuaW1wb3J0IHtQYW5lbE1vZHVsZX0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcclxuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUsIFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7QnV0dG9uTW9kdWxlfSBmcm9tICdwcmltZW5nL3ByaW1lbmcnO1xyXG5pbXBvcnQge1dvcmthbGxvY2F0aW9ufSBmcm9tICcuL3dvcmthbGxvY2F0aW9uJztcclxuaW1wb3J0IHtEcm9wZG93bjF9IGZyb20gJy4vZHJvcGRvd24xJztcclxuaW1wb3J0IHtGaWxlVXBsb2FkfSBmcm9tICcuL2ZpbGV1cGxvYWQnO1xyXG5pbXBvcnQge0RhdGFUYWJsZU1vZHVsZX0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcclxuaW1wb3J0IHtEcm9wZG93bk1vZHVsZX0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcclxuXHJcblxyXG5pbXBvcnQgeyBNeUN1cnJlbmN5UGlwZSB9IGZyb20gJy4uL3NoYXJlZC9waXBlcy9maXJzdC5waXBlJztcclxuaW1wb3J0IHsgV29ya2FsbG9jYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2hhcmVkL3dvcmthbGxvY2F0aW9uL2luZGV4JztcclxuXHJcbmltcG9ydCB7RmlsZVVwbG9hZE1vZHVsZX0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcclxuaW1wb3J0IHtTZWxlY3RJdGVtfSBmcm9tICdwcmltZW5nL3ByaW1lbmcnO1xyXG5pbXBvcnQgeyBNeURhdGVGb3JtYXQgfSBmcm9tICcuLi9zaGFyZWQvcGlwZXMvbXlkYXRlZm9ybWF0LnBpcGUnO1xyXG5pbXBvcnQgeyBFbWFpbFZhbGlkYXRlIH0gZnJvbSAnLi4vc2hhcmVkL3BpcGVzL2VtYWlsdmFsaWRhdGUucGlwZSc7XHJcbmltcG9ydCB7IEN1c3RvbVZhbGlkYXRvciB9IGZyb20gJy4uL3NoYXJlZC92YWxpZGF0b3JzL3ZhbGlkYXRvci5kaXJlY3RpdmUnO1xyXG5pbXBvcnQge0Jhc2VVcmxTZXJ2aWNlfSBmcm9tICcuLi9zaGFyZWQvYmFzZXVybC9iYXNldXJsLnNlcnZpY2UnO1xyXG4vKipcclxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBsYXp5IGxvYWRlZCB3b3JrYWxsb2NhdGlvbkNvbXBvbmVudC5cclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gIG1vZHVsZUlkOiBtb2R1bGUuaWQsXHJcbiAgc2VsZWN0b3I6ICdzZC13b3JrYWxsb2NhdGlvbicsXHJcbiAgdGVtcGxhdGVVcmw6ICd3b3JrYWxsb2NhdGlvbi5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJ3dvcmthbGxvY2F0aW9uLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6W015Q3VycmVuY3lQaXBlLE15RGF0ZUZvcm1hdCxFbWFpbFZhbGlkYXRlLEJhc2VVcmxTZXJ2aWNlXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgV29ya2FsbG9jYXRpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIC8vRm9ybSBncm9wIFxyXG4gIHVzZXJmb3JtOiBGb3JtR3JvdXA7XHJcbiAgLy8gR3Jvd2wgbWVzc2VnZVxyXG4gIG1zZ3M6IE1lc3NhZ2VbXT1bXTtcclxuXHJcbiAgLy9EZWNsYXJlOiBEYXRhIGhhbmRsaW5nIGZvciBHcmlkIGZsb3csIGZvcm0gZmxvd1xyXG4gIHdvcmthbGxvY2F0aW9uczogV29ya2FsbG9jYXRpb25bXT1bXTtcclxuICBzdWJtaXR0ZWQ6IGJvb2xlYW47XHJcbiAgd29ya2FsbG9jYXRpb246IFdvcmthbGxvY2F0aW9uO1xyXG4gIHNlbGVjdGVkUm93OiBXb3JrYWxsb2NhdGlvbjtcclxuXHJcbiAgIC8vIEZvcm0gZGF0YSBwcmVmaWxsZWRcclxuICAgZHJwdmFyOiBEcm9wZG93bjFbXT1bXTtcclxuICAgZHJwd29ya2FsbG9jYXRpb246IFNlbGVjdEl0ZW1bXT1bXTtcclxuICAgc3RhcnRkYXRlOiBEYXRlO1xyXG4gICBlbmRkYXRlOiBEYXRlO1xyXG5cclxuICAgLy9ib29sZWFuIHZhbHVlIGZvciBBZGQgbmV3IG9yIEVkaXQgTW9kZVxyXG4gICBuZXd3b3JrYWxsb2NhdGlvbjogYm9vbGVhbjtcclxuICAgXHJcbiAgLy8gIHNlbGVjdGVkd29ya2FsbG9jYXRpb246IHN0cmluZztcclxuICAgICAgIFxyXG4gIC8vKioqIGZpbGV1cGxvYWQgRGVjbGFyZSAqKipcclxuICAvL0NsaWVudCBmb3JtYXQgZm9yIGZpbGUgdXBsb2FkXHJcbiAgdXBsb2FkZWRGaWxlczogYW55W10gPSBbXTtcclxuICAvL3NlcnZlciBmb3JtYXQgZm9yIGZpbGUgdXBsb2FkXHJcbiAgZmlsZXVwbG9hZGFycjogRmlsZVVwbG9hZFtdPVtdO1xyXG4gIGZpbGV1cGxvYWQ6IEZpbGVVcGxvYWQ7XHJcblxyXG4gIG15YmFzZXVybDpzdHJpbmc7XHJcblxyXG4gIC8vUHJlcGFyZSBkYXRhIGZvciBuZXcgZW50cnkgb3IgaW5pdGl6ZSBkYXRhIGR1cmluZyBmb3JtIGxvYWQgYnkgY2xlYXJpbmcgZGF0YSBvciBwcmVzZXR0aW5nIGRhdGFcclxuICBjbGVhcigpe1xyXG4gICAgICAgIHRoaXMubmV3d29ya2FsbG9jYXRpb249dHJ1ZTtcclxuICAgICAgICB0aGlzLndvcmthbGxvY2F0aW9uPXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBzdGF0dXMgOidhY3RpdmUnLFxyXG4gICAgICAgICAgY29tcF9pZCA6JycsXHJcbiAgICAgICAgICBtZW1iZXJfaWQgOicnLFxyXG4gICAgICAgICAgd29ya2FsbG9jYXRpb25faWQ6JzEnLFxyXG4gICAgICAgICAgd29ya2FsbG9jYXRpb25fbmFtZTonJyxcclxuICAgICAgICAgIHdvcmthbGxvY2F0aW9uX2J1ZGdldDonJyxcclxuICAgICAgICAgIHdvcmthbGxvY2F0aW9uX2VuZGRhdGU6JycsXHJcbiAgICAgICAgICB3b3JrYWxsb2NhdGlvbl9yZW1hcmtzOicnLFxyXG4gICAgICAgICAgd29ya2FsbG9jYXRpb25fbWFuaG91cnM6JycsXHJcbiAgICAgICAgICBXb3JrYWxsb2NhdGlvbl90aW1lZnJhbWU6JycsXHJcbiAgICAgICAgICB3b3JrYWxsb2NhdGlvbl9jb21wbGV0ZWQ6J05vJyxcclxuICAgICAgICAgIHdvcmthbGxvY2F0aW9uX3N0YXJ0ZGF0ZTonJyxcclxuICAgICAgICAgIHdvcmthbGxvY2F0aW9uX2NvbW1pc3Npb246JycsXHJcbiAgICAgICAgICB3b3JrYWxsb2NhdGlvbl9kZXNjcmlwdGlvbjonJyxcclxuICAgICAgICAgIHdvcmthbGxvY2F0aW9uX3JlcXVpcmVkZGF5c3RvY29tcGxldGU6JycsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFxyXG4gICAgICBcclxuICAgICAgXHJcbiAgICB0aGlzLmZpbGV1cGxvYWQ9e1xyXG4gICAgICBmaWxlTmFtZTogJycsXHJcbiAgICAgIGZpbGVUeXBlOiAnJyxcclxuICAgICAgZmlsZVBhdGg6ICcnLFxyXG4gICAgICBmaWxlU3RhdHVzOiAnJyxcclxuICAgICAgdXBsb2FkZmlsZV9maWxlbmFtZTogJydcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGNvbnN0cnVjdG9yIGluaXRpYXplIG9mIGFsbCBuZWNlc3NhcnkgdmFyaWFibGUgYW5kIG9iamVjdHNcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZiOiBGb3JtQnVpbGRlcixcclxuICAgICAgICAgICAgICBwcml2YXRlIHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcclxuICAgICAgICAgICAgICBwcml2YXRlIHJvdXRlcjogUm91dGVyLFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgbG9jYWxTZXJ2aWNlOiBXb3JrYWxsb2NhdGlvblNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSBteWN1cjogTXlDdXJyZW5jeVBpcGUsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSBteWRhdGUxOiBNeURhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSBlbWFpbHZhbDogRW1haWxWYWxpZGF0ZSxcclxuICAgICAgICAgICAgICBwcml2YXRlIGJhc2VVcmxzZXJ2aWNlOkJhc2VVcmxTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgKXtcclxuICAgICAgICAgICB0aGlzLm15YmFzZXVybD1iYXNlVXJsc2VydmljZS5nZXRCYXNldXJsKCk7ICAgICBcclxuICAgICAgICAgIC8vIGRycG9wIGRvd24gY2FuIG9ubHkgYmUgcG9wdWxhdGVkIGluIGNvbnN0cnVjdG9yIGFuZCBub3QgaW4gbmdpbml0KClcclxuICAgICAgICAgIC8vIHRoaXMubG9jYWxTZXJ2aWNlXHJcbiAgICAgICAgICAvLyAuZ2V0c2VsZWN0ZHJwd29ya2FsbG9jYXRpb24oJ2hqJylcclxuICAgICAgICAgIC8vIC5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAvLyAgIC8qIGhhcHB5IHBhdGggKi8gcCA9PnRoaXMuZHJwdmFyPXAsLy9hbGVydCggSlNPTi5zdHJpbmdpZnkoIHApKSxcclxuICAgICAgICAgIC8vICAgLyogZXJyb3IgcGF0aCAqLyBlID0+IGNvbnNvbGUubG9nKGUpLFxyXG4gICAgICAgICAgLy8gICAvKiBvbkNvbXBsZXRlICovICgpID0+IHRoaXMucG9wdWxhdGVkcnAoKSk7Ly97dGhpcy5teW1ldGhvZCh0aGlzLmRycHZhcik7fSk7Ly90aGlzLm1zZ3MucHVzaCh7c2V2ZXJpdHk6J2luZm8nLCBzdW1tYXJ5OidTdWNjZXNzJywgZGV0YWlsOidGb3JtIFVwZGF0ZSBTdWNjZXNzZnVsbHk6ICcgKyBKU09OLnN0cmluZ2lmeSggdGhpcy5kcnB2YXIpICsgJyA6ICcgKyB0aGlzLmRycHZhci5sZW5ndGh9KSk7XHJcblxyXG4gICAgXHJcbiAgfVxyXG4gIG9uUm93U2VsZWN0KGV2ZW50OiBhbnkpe1xyXG4gICAgICAgICAvL0luZGljYXRvciBmb3IgZm9ybSBpcyBpbiBFZGl0IG1vZGVcclxuICAgICAgICAgdGhpcy5uZXd3b3JrYWxsb2NhdGlvbj1mYWxzZTtcclxuICAgICAgICAgLy9Db3B5IG9mIHJvdyBzZWxlY3RlZFxyXG4gICAgICAgIC8vICB0aGlzLndvcmthbGxvY2F0aW9uPXRoaXMuc2VsZWN0ZWRSb3c7XHJcbiAgICAgICAgIGxldCB0ZW1wcHJvajogV29ya2FsbG9jYXRpb247XHJcbiAgICAgICAgIHRlbXBwcm9qID0gdGhpcy5zZWxlY3RlZFJvdztcclxuICAgICAgICAgLy9DYWxsaW5nIFdTIHRvIGdldCB0aGUgc2VsZWN0ZWQgZGF0YSBmcm9tIHNlcnZlciBEQiBvZiB0aGUgc2VsZWN0ZWQgcm93XHJcbiAgICAgIC8vICAgIHRoaXMubG9jYWxTZXJ2aWNlXHJcbiAgICAgIC8vIC5nZXRzZWxlY3RBbGxmaWxlV29ya2FsbG9jYXRpb24odGVtcHByb2oud29ya2FsbG9jYXRpb25faWQpXHJcbiAgICAgIC8vIC5zdWJzY3JpYmUoXHJcbiAgICAgIC8vICAgIC8qIGhhcHB5IHBhdGggKi8gcCA9PiB0aGlzLmZpbGV1cGxvYWRhcnI9cCxcclxuICAgICAgLy8gICAgLyogZXJyb3IgcGF0aCAqLyBlID0+IGNvbnNvbGUubG9nKCBlKSxcclxuICAgICAgLy8gICAgLyogb25Db21wbGV0ZSAqLyAoKSA9PiBjb25zb2xlLmxvZygnZG9uZSBnZXRzZWxlY3RBbGxmaWxldXBsb2Fkd29ya2FsbG9jYXRpb246ICcgKyB0aGlzLmZpbGV1cGxvYWRhcnIpKTtcclxuXHJcbiAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdvblJvd1NlbGVjdDogJyArIEpTT04uc3RyaW5naWZ5ICh0aGlzLndvcmthbGxvY2F0aW9uKSk7XHJcbiAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdvblJvd1NlbGVjdCBmaWxldXBsb2FkYXJyOiAnICsgSlNPTi5zdHJpbmdpZnkgKHRoaXMuZmlsZXVwbG9hZGFycikpO1xyXG5cclxuICAgICAgICAgLy9DYWxsaW5nIFdTIHRvIGdldCB0aGUgc2VsZWN0ZWQgZGF0YSBmcm9tIHNlcnZlciBEQiBvZiB0aGUgc2VsZWN0ZWQgcm93XHJcbiAgICAgIC8vICAgdGhpcy5sb2NhbFNlcnZpY2VcclxuICAgICAgLy8gLmdldGVkaXQodGVtcHByb2oud29ya2FsbG9jYXRpb25faWQpXHJcbiAgICAgIC8vIC5zdWJzY3JpYmUoXHJcbiAgICAgIC8vICAgIC8qIGhhcHB5IHBhdGggKi8gcCA9PiB0aGlzLndvcmthbGxvY2F0aW9uPXAsXHJcbiAgICAgIC8vICAgIC8qIGVycm9yIHBhdGggKi8gZSA9PiBjb25zb2xlLmxvZyggZSksXHJcbiAgICAgIC8vICAgIC8qIG9uQ29tcGxldGUgKi8gKCkgPT4ge3RoaXMuYWZ0ZXJjYWxsZGF0ZSgpO30gKTsvL2NvbnNvbGUubG9nKCdkb25lIGdldHNlbGVjdEVkaXR3b3JrYWxsb2NhdGlvbjogJyArIHRoaXMud29ya2FsbG9jYXRpb24pKTtcclxuXHJcbiAgICAgICAgIFxyXG4gICAgICAgICBcclxuICB9XHJcbiAgYWZ0ZXJjYWxsZGF0ZSgpe1xyXG4gICAgLy8gIGFsZXJ0KEpTT04uc3RyaW5naWZ5KCB0aGlzLndvcmthbGxvY2F0aW9uKSk7XHJcbiAgICAvLyBhbGVydCh0aGlzLndvcmthbGxvY2F0aW9uLndvcmthbGxvY2F0aW9uX2VuZGRhdGUpO1xyXG4gICAgLy8gICAgICBhbGVydChuZXcgRGF0ZShOdW1iZXIodGhpcy53b3JrYWxsb2NhdGlvbi53b3JrYWxsb2NhdGlvbl9lbmRkYXRlKSApKTtcclxuICAgIC8vICAgICAgYWxlcnQobmV3IERhdGUoTnVtYmVyKHRoaXMud29ya2FsbG9jYXRpb24ud29ya2FsbG9jYXRpb25fc3RhcnRkYXRlKSApKTtcclxuICAgIC8vIHRoaXMuc3RhcnRkYXRlICA9IG5ldyBEYXRlKE51bWJlcih0aGlzLndvcmthbGxvY2F0aW9uLndvcmthbGxvY2F0aW9uX3N0YXJ0ZGF0ZSApKTtcclxuICAgIC8vIHRoaXMuZW5kZGF0ZSAgPSBuZXcgRGF0ZShOdW1iZXIodGhpcy53b3JrYWxsb2NhdGlvbi53b3JrYWxsb2NhdGlvbl9lbmRkYXRlICkpO1xyXG4gIH1cclxuXHJcbiAgLy9QcmVwYXJlIGZvciBKU09OIGZvciBmaWxlIHRvIGJlIHVwbG9hZGVkIHRvIHNlcnZlciBqdXN0IGFmdGVyIGZvcm0gc3VibWlzc2lvblxyXG4gIG9uRmluYWxGaWxlVXBsb2FkKCl7ICAgXHJcbiAgXHJcbiAgICAvLyBhbGVydCh0aGlzLnVwbG9hZGVkRmlsZXMubGVuZ3RoKTtcclxuICAgIGZvcihsZXQgaT0wO2k8dGhpcy51cGxvYWRlZEZpbGVzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgbGV0IGZpbGVuYW1lPXRoaXMudXBsb2FkZWRGaWxlc1tpXS5uYW1lO1xyXG4gICAgICAgICBcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgdGhpcy5maWxldXBsb2FkLmZpbGVOYW1lPWZpbGVuYW1lO1xyXG4gICAgICAgICAgdGhpcy5maWxldXBsb2FkLmZpbGVQYXRoPScnO1xyXG4gICAgICAgICAgdGhpcy5maWxldXBsb2FkLmZpbGVTdGF0dXM9J1llcyc7XHJcbiAgICAgICAgICB0aGlzLmZpbGV1cGxvYWQuZmlsZVR5cGU9J2ltZyc7XHJcbiAgICAgICAgICB0aGlzLmZpbGV1cGxvYWQudXBsb2FkZmlsZV9maWxlbmFtZT0nJztcclxuICAgICAgICAgLy8gYWxlcnQoXCJpbnNpZGVmaWxldXBsb2FkOiBcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMuZmlsZXVwbG9hZCkpO1xyXG4gICAgICAgICAgdGhpcy5maWxldXBsb2FkYXJyLnB1c2godGhpcy5maWxldXBsb2FkKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICBcclxuICB9IFxyXG5cclxuICAvLyBEYXRlIGNoYW5nZSBldmVudCB0byBmb3JtYXQgbmdtb2RlbCB0byBvdXIgZm9ybWF0IGRhdGUgYW5kIGNhbGxpbmcgcGlwZSBcclxuICAvLyBzdGFydGRhdGVjaGFuZ2UoKXtcclxuICAvLyAgIHRoaXMud29ya2FsbG9jYXRpb24ucHJvam1pbGVfc3RhcnRkYXRlPXRoaXMubXlkYXRlMS5wYXJzZSh0aGlzLndvcmthbGxvY2F0aW9uLnByb2ptaWxlX3N0YXJ0ZGF0ZSlcclxuICAvLyB9XHJcbiAgLy8gZW5kZGF0ZWNoYW5nZSgpe1xyXG4gIC8vICAgdGhpcy53b3JrYWxsb2NhdGlvbi5wcm9qbWlsZV9lbmRkYXRlPXRoaXMubXlkYXRlMS5wYXJzZSh0aGlzLndvcmthbGxvY2F0aW9uLnByb2ptaWxlX2VuZGRhdGUpXHJcbiAgLy8gfVxyXG5cclxuXHJcbiAgb25TdWJtaXQoKXtcclxuICAgICAgLy8gICBhbGVydChKU09OLnN0cmluZ2lmeSh0aGlzLnNlbGVjdGVkUm93KSk7XHJcbiAgICAgICAgLy9hbGVydCh0aGlzLndvcmthbGxvY2F0aW9uLndvcmthbGxvY2F0aW9uX3N0YXJ0ZGF0ZSk7XHJcbiAgICAgICAgLy8gdGhpcy53b3JrYWxsb2NhdGlvbi53b3JrYWxsb2NhdGlvbl9zdGFydGRhdGU9dGhpcy5teWRhdGUxLnBhcnNlKHRoaXMuc3RhcnRkYXRlKVxyXG4gIFxyXG4gICAgICAgIC8vIHRoaXMud29ya2FsbG9jYXRpb24ud29ya2FsbG9jYXRpb25fZW5kZGF0ZT10aGlzLm15ZGF0ZTEucGFyc2UodGhpcy5lbmRkYXRlKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMub25GaW5hbEZpbGVVcGxvYWQoKTtcclxuICAgICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tc2dzID0gW107XHJcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy53b3JrYWxsb2NhdGlvbikpO1xyXG4gICAgICAgIHRoaXMubXNncy5wdXNoKHtzZXZlcml0eTonaW5mbycsIHN1bW1hcnk6J1BsZWFzZSB3YWl0JywgZGV0YWlsOidGb3JtIFN1Ym1pdHRlZCBTdWNjZXNzZnVsbHkuLiBQbGVhc2Ugd2FpdC4uJ30pXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdvblN1Ym1pdCBvblJvd1NlbGVjdDogJyArIEpTT04uc3RyaW5naWZ5ICh0aGlzLndvcmthbGxvY2F0aW9uKSk7XHJcbiAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdvblN1Ym1pdCBvblJvd1NlbGVjdCBmaWxldXBsb2FkYXJyOiAnICsgSlNPTi5zdHJpbmdpZnkgKHRoaXMuZmlsZXVwbG9hZGFycikpO1xyXG5cclxuICAgICAgICBpZih0aGlzLm5ld3dvcmthbGxvY2F0aW9uKXsvL0FkZCBuZXcgZW50cnkgc2F2aW5nXHJcbiAgICAgICAgICAgdGhpcy5sb2NhbFNlcnZpY2VcclxuICAgICAgICAgIC5pbnNlcnQodGhpcy53b3JrYWxsb2NhdGlvbix0aGlzLmZpbGV1cGxvYWRhcnIpXHJcbiAgICAgICAgICAuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAvKiBoYXBweSBwYXRoICovIHAgPT4gdGhpcy53b3JrYWxsb2NhdGlvbnMgPSBwLFxyXG4gICAgICAgICAgICAvKiBlcnJvciBwYXRoICovIGUgPT4gY29uc29sZS5sb2coZSksXHJcbiAgICAgICAgICAgIC8qIG9uQ29tcGxldGUgKi8gKCkgPT4gdGhpcy5tc2dzLnB1c2goe3NldmVyaXR5OidpbmZvJywgc3VtbWFyeTonU3VjY2VzcycsIGRldGFpbDonRm9ybSBVcGRhdGUgU3VjY2Vzc2Z1bGx5J30pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXsgLy8gdXBkYXRlIGVudHJ5IHNhdmluZ1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ3dvcmthbGxvY2F0aW9uOiAnICsgSlNPTi5zdHJpbmdpZnkoIHRoaXMud29ya2FsbG9jYXRpb24pICsgJyAsIGY6JyArICBKU09OLnN0cmluZ2lmeSggdGhpcy5maWxldXBsb2FkYXJyKSk7XHJcbiAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZVxyXG4gICAgICAgICAgLnVwZGF0ZSh0aGlzLndvcmthbGxvY2F0aW9uLHRoaXMuZmlsZXVwbG9hZGFycilcclxuICAgICAgICAgIC5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgIC8qIGhhcHB5IHBhdGggKi8gcCA9PiB0aGlzLndvcmthbGxvY2F0aW9ucyA9IHAsXHJcbiAgICAgICAgICAgIC8qIGVycm9yIHBhdGggKi8gZSA9PiBjb25zb2xlLmxvZyhlKSxcclxuICAgICAgICAgICAgLyogb25Db21wbGV0ZSAqLyAoKSA9PiB0aGlzLm1zZ3MucHVzaCh7c2V2ZXJpdHk6J2luZm8nLCBzdW1tYXJ5OidTdWNjZXNzJywgZGV0YWlsOidGb3JtIFVwZGF0ZSBTdWNjZXNzZnVsbHknfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMubXNncyA9IFtdO1xyXG4gICAgICAgICAgdGhpcy5tc2dzLnB1c2goe3NldmVyaXR5OidpbmZvJywgc3VtbWFyeTonU3VjY2VzcycsIGRldGFpbDonRm9ybSBVcGRhdGUgU3VjY2Vzc2Z1bGx5J30pO1xyXG4gIH1cclxuXHJcbiAgLy91cGxvYWQgZmlsZXMgdG8gdGhlIHNlcnZlclxyXG5vblVwbG9hZChldmVudDogYW55KXtcclxuICAvL2FsZXJ0KGV2ZW50LmZpbGVzKTtcclxuICBmb3IobGV0IGZpbGUgb2YgZXZlbnQuZmlsZXMpIHtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgdGhpcy51cGxvYWRlZEZpbGVzLnB1c2goZmlsZSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vY29uc29sZS5sb2coZXZlbnQueGhyLnJlc3BvbnNlKTtcclxuICB0aGlzLm1zZ3MgPSBbXTtcclxuICB0aGlzLm1zZ3MucHVzaCh7c2V2ZXJpdHk6ICdpbmZvJywgc3VtbWFyeTogJ0ZpbGUgVXBsb2FkZWQnLCBkZXRhaWw6ICcnfSk7XHJcbn1cclxuXHJcbiAgLy9GaWxlIHVwbG9hZCBldmVudFxyXG5vbkJlZm9yZVVwbG9hZChldmVudCA6YW55ICl7XHJcbiAgZXZlbnQueGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7bXVsdGlwYXJ0L2Zvcm0tZGF0YTsnKTtcclxuICBjb25zb2xlLmxvZyhcIm1pdGggaGVyZTpcIik7XHJcbn1cclxuXHJcbi8vRm9ybSBpbml0XHJcbm5nT25Jbml0KCkgeyBcclxuICAgICAgLy9DbGVhciBldmVudCBhbmQgaW5pdGFsaXplIG9iamVjdHNcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICBcclxuICAgICAgLy8gYWxlcnQoIHRoaXMuc3RhcnRkYXRlLmdldERheSArICcvJyArdGhpcy5zdGFydGRhdGUuZ2V0TW9udGggKyAnLycgK3RoaXMuc3RhcnRkYXRlLmdldEZ1bGxZZWFyKTsgXHJcbiAgICAgIC8vIGFsZXJ0KCAnbnVtYmVyOiAnICsgdGhpcy5teWN1ci5wYXJzZShcIjEwXCIpKTtcclxuICAgICAgLy8gbGV0IGJsOiBib29sZWFuO1xyXG4gICAgICAvLyBibCA9ICB0aGlzLmVtYWlsdmFsLnBhcnNlKCdhdHVsa3VsdmVnbWFpbC5jb20nLCcnKTtcclxuICAgICAgLy8gYWxlcnQoYmwgKTtcclxuXHJcbiAgICAgIC8vQ3JlYXRlIHVzZXJmb3JtIGFuZCBhcHBseSBWYWxpZGF0aW9uXHJcbiAgICAgIC8vIGFsZXJ0KHRoaXMubXlkYXRlMS5wYXJzZSggJzIwMTYtMTItMTNUMTg6MzA6MDAuMDAwWicpKTtcclxuICAgICAgdGhpcy51c2VyZm9ybSA9IHRoaXMuZmIuZ3JvdXAoe1xyXG4gICAgICAgICAgICAnbmFtZSc6IG5ldyBGb3JtQ29udHJvbCgnJywgVmFsaWRhdG9ycy5jb21wb3NlKFtWYWxpZGF0b3JzLnJlcXVpcmVkLEN1c3RvbVZhbGlkYXRvci5pc0VtYWlsVmFsaWRdKSksXHJcbiAgICAgICAgICAgICAnYnVkZ2V0JzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgICdyZW1hcmtzJzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgICdtYW5ob3Vycyc6IG5ldyBGb3JtQ29udHJvbCgnJywgVmFsaWRhdG9ycy5yZXF1aXJlZCksXHJcbiAgICAgICAgICAgICAnc3RhcnRkYXRldic6IG5ldyBGb3JtQ29udHJvbCgnJywgVmFsaWRhdG9ycy5yZXF1aXJlZCksXHJcbiAgICAgICAgICAgICAnZW5kZGF0ZXYnOiBuZXcgRm9ybUNvbnRyb2woJycsIFZhbGlkYXRvcnMucmVxdWlyZWQpLFxyXG4gICAgICAgICAgICAgJ3RpbWVmcmFtZSc6IG5ldyBGb3JtQ29udHJvbCgnJywgVmFsaWRhdG9ycy5yZXF1aXJlZCksXHJcbiAgICAgICAgICAgICAnY29tcGxldGVkJzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgICdjb21taXNzaW9uJzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IG5ldyBGb3JtQ29udHJvbCgnJywgVmFsaWRhdG9ycy5yZXF1aXJlZCksXHJcbiAgICAgICAgICAgICAnZGF5c3JlcXVpcmVkJzogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy9wcmVsb2FkIGRhdGEgR3JpZCByZXF1aXJlZCBcclxuICAgICAgICB0aGlzLmxvY2FsU2VydmljZVxyXG4gICAgICAuZ2V0YWxsKClcclxuICAgICAgLnN1YnNjcmliZShcclxuICAgICAgICAgLyogaGFwcHkgcGF0aCAqLyBwID0+IHRoaXMud29ya2FsbG9jYXRpb25zPXAsXHJcbiAgICAgICAgIC8qIGVycm9yIHBhdGggKi8gZSA9PiBjb25zb2xlLmxvZyggZSksXHJcbiAgICAgICAgIC8qIG9uQ29tcGxldGUgKi8gKCkgPT4gdGhpcy5wcm9jZXNzZGF0YSgpKTtcclxuXHJcbiAgICAgICAgIFxyXG4gICAgICAgIFxyXG4gIH1cclxuICBwcm9jZXNzZGF0YSgpe1xyXG4gICAgXHJcblxyXG4gIH1cclxuICBwb3B1bGF0ZWRycCgpeyAvL3BvcHVsYXRlIGRyb3Bkb3ducyBvbiBwYWdlIGxvYWQuIGJ5IHVzaW5nIHB1c2ggYW5kIFNlbGVjdEl0ZW1cclxuICAgIC8vY29uc29sZS5sb2codGhpcy5kcnB2YXIubGVuZ3RoKTtcclxuICAgICAgICBmb3IodmFyIGkgPTA7aTx0aGlzLmRycHZhci5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgIC8vYWxlcnQodGhpcy5kcnB2YXJbaV0ubGFiZWxkICsgJyA6ICcgICsgdGhpcy5kcnB2YXJbaV0udmFsdWVkKTtcclxuICAgICAgICAgICB0aGlzLmRycHdvcmthbGxvY2F0aW9uLnB1c2goe2xhYmVsOnRoaXMuZHJwdmFyW2ldLmxhYmVsZCAsIHZhbHVlOnRoaXMuZHJwdmFyW2ldLnZhbHVlZH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhbGVydChKU09OLnN0cmluZ2lmeSh0aGlzLmRycHdvcmthbGxvY2F0aW9uKSk7XHJcblxyXG4gIH1cclxuXHJcbiAgLy9Ecm9wZG93biBjaGFuZ2UgZXZlbnQgY2FwdHVyZVxyXG4gIGRycGNoYW5nZShldmVudHMxOiBhbnkpe1xyXG4gICAgLy8gYWxlcnQoZXZlbnRzMS52YWx1ZSk7XHJcbiAgfVxyXG5cclxuICAvL0p1c3QgYSBtZXRob2QgdG8gY2FsbCB1c2VyIGZvcm0gZGF0YSBvbiBmb3JtIHN1Ym1pdFxyXG4gIGdldCBkaWFnbm9zdGljKCkgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyZm9ybS52YWx1ZSk7IH1cclxuXHJcbiB9XHJcbiJdfQ==
